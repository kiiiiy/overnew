<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini 댓글 필터링 테스트</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Inter 폰트 사용 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
    </style>
</head>
<body class="p-8">

    <div class="max-w-xl mx-auto bg-white p-6 md:p-10 rounded-xl shadow-2xl border border-gray-100">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">
            💬 댓글 필터링 테스트 (Gemini API)
        </h1>
        <p class="text-sm text-gray-500 mb-6">
            이 폼은 `create_comment` 뷰로 POST 요청을 보냅니다. 테스트를 위해 토론방 ID(room_id)를 1로 가정하고 URL을 설정했습니다.
            <br>
            <strong>테스트 시나리오:</strong>
            <ul>
                <li class="list-disc ml-4"><strong>안전한 댓글:</strong> "안녕하세요, 좋은 의견입니다!" -> 성공 메시지 확인</li>
                <li class="list-disc ml-4"><strong>혐오 댓글:</strong> (특정 집단에 대한 비하 발언) -> 경고 메시지와 함께 댓글 내용이 "AI가 비하적 의도를 발견해 필터링했어요."로 대체되는지 확인</li>
            </ul>
        </p>

        <!-- 
            주의: 실제 Django 환경에서는 action="/discussion/1/comment/create/" 부분을 
            {% url 'discussion:create_comment' room_id=room.room_id %} 와 같이 변경해야 합니다.
            CSRF 토큰도 필요합니다. <input type="hidden" name="csrfmiddlewaretoken" value="...">
        -->
        <form action="/community/1/comment-create/" method="POST" class="space-y-6">



            {% csrf_token %}

            <!-- CSRF 토큰은 Django에서 필수지만, 데모 HTML이므로 일단 제외합니다. -->
            <!-- <input type="hidden" name="csrfmiddlewaretoken" value="YOUR_CSRF_TOKEN_HERE"> -->
            
            <!-- Room ID (Hidden Field, Django는 URL에서 가져오지만 안전을 위해 포함) -->
            <input type="hidden" name="room_id" value="1">
            
            <!-- Parent ID (답글이 아닌 일반 댓글 작성을 위해 빈 값으로 둡니다) -->
            <input type="hidden" name="parent_id" value="">

            <div>
                <label for="content" class="block text-sm font-medium text-gray-700 mb-1">댓글 내용</label>
                <textarea 
                    id="content" 
                    name="content" 
                    rows="4" 
                    placeholder="여기에 댓글 내용을 입력하여 필터링을 테스트하세요."
                    class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out"
                    required
                ></textarea>
            </div>

            <div class="flex items-center space-x-4">
                <input 
                    type="checkbox" 
                    id="is_anonymous" 
                    name="is_anonymous" 
                    class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                >
                <label for="is_anonymous" class="text-sm text-gray-700 select-none">익명으로 작성</label>
            </div>

            <button 
                type="submit"
                class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out transform hover:scale-[1.01]"
            >
                댓글 등록 (필터링 테스트)
            </button>
        </form>

        <p class="mt-6 text-xs text-center text-gray-400">
            *이 폼을 사용하려면, Django 서버가 실행 중이어야 하고 `create_comment` 뷰에 접근 권한이 있어야 합니다.
        </p>
    </div>

</body>
</html>