<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>OVERNEW - í”¼ë“œ</title>
    <style>
        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: #111;
        }

        .page {
            max-width: 430px;
            margin: 0 auto;
            min-height: 100vh;
            background: #fdf7ec;
            display: flex;
            flex-direction: column;
        }

        /* í—¤ë” */
        .header {
            padding: 16px 20px 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .logo {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: 1px;
            color: #5c1bb8;
        }
        .header-right {
            display: flex;
            gap: 12px;
            align-items: center;
            font-size: 18px;
        }

        /* íƒ­ (HOT / FOLLOWING) */
        .tab-bar {
            display: flex;
            margin: 4px 20px 12px;
            background: #efe0cc;
            border-radius: 999px;
            padding: 4px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 6px 0;
            font-size: 13px;
            border-radius: 999px;
            text-decoration: none;
            color: #555;
        }
        .tab-active {
            background: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.15);
            font-weight: 600;
        }

        /* ì¹´í…Œê³ ë¦¬ ì¹© */
        .category-chips {
            display: flex;
            gap: 8px;
            padding: 0 20px 12px;
            flex-wrap: wrap;
        }
        .chip {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 999px;
            background: #f3e7d6;
            color: #444;
            text-decoration: none;
        }
        .chip-active {
            background: #5c1bb8;
            color: #fff;
            font-weight: 600;
        }

        /* í”¼ë“œ ë¦¬ìŠ¤íŠ¸ */
        .feed-list {
            padding: 0 16px 80px; /* ì•„ë˜ ë„¤ë¹„ ì—¬ë°± */
        }

        .card {
            background: #ffffff;
            border-radius: 14px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            gap: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .card-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .card-topline {
            font-size: 11px;
            display: flex;
            gap: 6px;
            align-items: center;
        }
        .badge-category {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 4px;
            background: #ffd74a;
            font-weight: 600;
        }
        .media-name {
            color: #777;
        }
        .title {
            font-size: 13px;
            font-weight: 600;
            line-height: 1.4;
        }
        .meta {
            margin-top: 4px;
            font-size: 11px;
            color: #777;
            display: flex;
            gap: 12px;
        }
        .thumb {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            background: #ddd;
            flex-shrink: 0;
            overflow: hidden;
        }
        .thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* íŒ”ë¡œì‰ í”¼ë“œ - ì—…ë¡œë” í‘œì‹œìš© */
        .activity-user {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
            font-size: 12px;
        }
        .avatar {
            width: 28px;
            height: 28px;
            border-radius: 999px;
            background: #ccc;
        }
        .activity-text {
            color: #555;
        }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ëŒ€ì¶© ëª¨ì–‘ë§Œ) */
        .bottom-nav {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            max-width: 430px;
            margin: 0 auto;
            padding: 8px 24px 12px;
            background: #f4eee4;
        }
        .bottom-nav-inner {
            display: flex;
            justify-content: space-between;
        }
        .nav-item {
            text-align: center;
            font-size: 10px;
            color: #777;
        }
        .nav-dot {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            margin: 0 auto 4px;
            background: #e0d4ff;
        }
        .nav-item-active .nav-dot {
            background: #7c3aed;
        }
        .nav-item-active {
            color: #7c3aed;
            font-weight: 600;
        }
    </style>
</head>
<body>
<div class="page">

    <!-- í—¤ë” -->
    <header class="header">
        <div class="logo">OVERNEW</div>
        <div class="header-right">
            â˜° ğŸ””
        </div>
    </header>

    <!-- HOT / FOLLOWING íƒ­ -->
    <div class="tab-bar">
        <a href="{% url 'feed:hot_feed' %}" class="tab {% if mode == 'hot' %}tab-active{% endif %}">
            HOT
        </a>
        <a href="{% url 'feed:following_feed' %}" class="tab {% if mode == 'following' %}tab-active{% endif %}">
            FOLLOWING
        </a>
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ ì¹© (HOT / FOLLOWING ì—ì„œ ì‚¬ìš©) -->
    {% if categories %}
        <div class="category-chips">
            {% for cat in categories %}
                <a href="?category={{ cat.nc_id }}"
                   class="chip {% if selected_category_id == cat.nc_id %}chip-active{% endif %}">
                    {{ cat.news_category }}
                </a>
            {% endfor %}
        </div>
    {% endif %}

    <!-- ë©”ì¸ í”¼ë“œ -->
    <main class="feed-list">

        {# ALL / HOT ê³µí†µ ì¹´ë“œ ë Œë”ë§ #}
        {% if mode == 'all' or mode == 'hot' %}
            {% for article in articles %}
                <article class="card">
                    <div class="card-text">
                        <div class="card-topline">
                            {% if article.nc %}
                                <span class="badge-category">{{ article.nc.news_category }}</span>
                            {% endif %}
                            {% if article.media %}
                                <span class="media-name">{{ article.media.media_name }}</span>
                            {% endif %}
                        </div>

                        <div class="title">
                            {{ article.title }}
                        </div>

                        <div class="meta">
                            <span>â¤ {{ article.like_count|default:0 }}</span>
                            <span>ğŸ“ {{ article.scrap_set.count }}</span>
                            <span>ğŸ’¬ {{ article.discussion_set.count }}</span>
                            <span>{{ article.created_at|date:"m.d" }}</span>
                        </div>
                    </div>

                    <div class="thumb">
                        {% if article.image %}
                            <img src="{{ article.image }}" alt="">
                        {% endif %}
                    </div>
                </article>
            {% empty %}
                <p>í‘œì‹œí•  ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            {% endfor %}
        {% endif %}

        {# FOLLOWING ëª¨ë“œ: íŒ”ë¡œìš°í•œ ì‚¬ëŒì´ ì˜¬ë¦° ê¸€ #}
        {% if mode == 'following' %}
            {% for article in articles %}
                <article class="card">
                    <div class="card-text">

                        <div class="activity-user">
                            <div class="avatar"></div>
                            <div class="activity-text">
                                <b>{{ article.author.nickname|default:article.author.username }}</b>ë‹˜ì´ ì˜¬ë¦° ê¸°ì‚¬ì…ë‹ˆë‹¤
                            </div>
                        </div>

                        <div class="card-topline">
                            {% if article.nc %}
                                <span class="badge-category">{{ article.nc.news_category }}</span>
                            {% endif %}
                            {% if article.media %}
                                <span class="media-name">{{ article.media.media_name }}</span>
                            {% endif %}
                        </div>

                        <div class="title">
                            {{ article.title }}
                        </div>

                        <div class="meta">
                            <span>â¤ {{ article.like_count|default:0 }}</span>
                            <span>ğŸ“ {{ article.scrap_set.count }}</span>
                            <span>ğŸ’¬ {{ article.discussion_set.count }}</span>
                            <span>{{ article.created_at|date:"m.d" }}</span>
                        </div>
                    </div>

                    <div class="thumb">
                        {% if article.image %}
                            <img src="{{ article.image }}" alt="">
                        {% endif %}
                    </div>
                </article>
            {% empty %}
                <p>íŒ”ë¡œìš°í•œ ì‚¬ìš©ìê°€ ì˜¬ë¦° ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            {% endfor %}
        {% endif %}

    </main>

    <!-- í•˜ë‹¨ ë„¤ë¹„ (ëª¨ì–‘ë§Œ) -->
    <nav class="bottom-nav">
        <div class="bottom-nav-inner">
            <div class="nav-item nav-item-active">
                <div class="nav-dot"></div>
                <div>í”¼ë“œ</div>
            </div>
            <div class="nav-item">
                <div class="nav-dot"></div>
                <div>ì•„ì¹´ì´ë¸Œ</div>
            </div>
            <div class="nav-item">
                <div class="nav-dot"></div>
                <div>ì»¤ë®¤ë‹ˆí‹°</div>
            </div>
            <div class="nav-item">
                <div class="nav-dot"></div>
                <div>ë§ˆì´í˜ì´ì§€</div>
            </div>
        </div>
    </nav>

</div>
</body>
</html>
